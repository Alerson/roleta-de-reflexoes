{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{MensagensProvider}from'./context/MensagensContext';import Home from'./pages/Home/Home';import TelaInicial from'./pages/TelaInicial/TelaInicial';import ConsentimentoPrivacidade from'./components/ConsentimentoPrivacidade/ConsentimentoPrivacidade';import audioService from'./services/AudioService';import'./styles/global.css';// Verificação condicional para capacitor\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CapApp=typeof window!=='undefined'&&window.Capacitor?window.Capacitor.Plugins.App:null;function App(){const[consentimentoRealizado,setConsentimentoRealizado]=useState(false);const[carregando,setCarregando]=useState(true);// Verificar se o usuário já deu consentimento e inicializar serviços\nuseEffect(()=>{const initializeApp=async()=>{try{// Verificar consentimento\nconst privacyConsent=localStorage.getItem('privacyConsent');if(privacyConsent==='true'){setConsentimentoRealizado(true);}// Inicializar serviço de áudio após um atraso para garantir que a interface esteja carregada\nsetTimeout(()=>{audioService.init();},500);// Adicione escuta para eventos de ciclo de vida apenas se o Capacitor estiver disponível\nif(CapApp){CapApp.addListener('appStateChange',_ref=>{let{isActive}=_ref;if(isActive){// App voltou ao primeiro plano\nif(audioService.musicaAtiva){audioService.play();}}else{// App foi para o background\n// Opcionalmente pausa o áudio aqui, dependendo do comportamento desejado\n// audioService.pause();\n}});}}catch(error){console.error(\"Erro na inicialização do app:\",error);}finally{setCarregando(false);}};initializeApp();return()=>{// Remover listeners apenas se o Capacitor estiver disponível\nif(CapApp){CapApp.removeAllListeners();}audioService.cleanup();};},[]);const handleConsent=()=>{setConsentimentoRealizado(true);};if(carregando){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:\"Carregando...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[!consentimentoRealizado&&/*#__PURE__*/_jsx(ConsentimentoPrivacidade,{onConsent:handleConsent}),/*#__PURE__*/_jsx(MensagensProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(TelaInicial,{})}),/*#__PURE__*/_jsx(Route,{path:\"/jogo\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})})})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","MensagensProvider","Home","TelaInicial","ConsentimentoPrivacidade","audioService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CapApp","window","Capacitor","Plugins","App","consentimentoRealizado","setConsentimentoRealizado","carregando","setCarregando","initializeApp","privacyConsent","localStorage","getItem","setTimeout","init","addListener","_ref","isActive","musicaAtiva","play","error","console","removeAllListeners","cleanup","handleConsent","className","children","onConsent","path","element","to"],"sources":["/Users/alersonrigo/roleta-de-reflexoes/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { MensagensProvider } from './context/MensagensContext';\nimport Home from './pages/Home/Home';\nimport TelaInicial from './pages/TelaInicial/TelaInicial';\nimport ConsentimentoPrivacidade from './components/ConsentimentoPrivacidade/ConsentimentoPrivacidade';\nimport audioService from './services/AudioService';\nimport './styles/global.css';\n\n// Verificação condicional para capacitor\nconst CapApp = typeof window !== 'undefined' && window.Capacitor ? \n  window.Capacitor.Plugins.App : null;\n\nfunction App() {\n  const [consentimentoRealizado, setConsentimentoRealizado] = useState(false);\n  const [carregando, setCarregando] = useState(true);\n\n  // Verificar se o usuário já deu consentimento e inicializar serviços\n  useEffect(() => {\n    const initializeApp = async () => {\n      try {\n        // Verificar consentimento\n        const privacyConsent = localStorage.getItem('privacyConsent');\n        if (privacyConsent === 'true') {\n          setConsentimentoRealizado(true);\n        }\n        \n        // Inicializar serviço de áudio após um atraso para garantir que a interface esteja carregada\n        setTimeout(() => {\n          audioService.init();\n        }, 500);\n        \n        // Adicione escuta para eventos de ciclo de vida apenas se o Capacitor estiver disponível\n        if (CapApp) {\n          CapApp.addListener('appStateChange', ({ isActive }) => {\n            if (isActive) {\n              // App voltou ao primeiro plano\n              if (audioService.musicaAtiva) {\n                audioService.play();\n              }\n            } else {\n              // App foi para o background\n              // Opcionalmente pausa o áudio aqui, dependendo do comportamento desejado\n              // audioService.pause();\n            }\n          });\n        }\n      } catch (error) {\n        console.error(\"Erro na inicialização do app:\", error);\n      } finally {\n        setCarregando(false);\n      }\n    };\n  \n    initializeApp();\n    \n    return () => {\n      // Remover listeners apenas se o Capacitor estiver disponível\n      if (CapApp) {\n        CapApp.removeAllListeners();\n      }\n      audioService.cleanup();\n    };\n  }, []);\n\n  const handleConsent = () => {\n    setConsentimentoRealizado(true);\n  };\n\n  if (carregando) {\n    return <div className=\"loading-container\">Carregando...</div>;\n  }\n\n  return (\n    <>\n      {!consentimentoRealizado && (\n        <ConsentimentoPrivacidade onConsent={handleConsent} />\n      )}\n      \n      <MensagensProvider>\n        <Router>\n          <div className=\"App\">\n            <Routes>\n              <Route path=\"/\" element={<TelaInicial />} />\n              <Route path=\"/jogo\" element={<Home />} />\n              <Route path=\"*\" element={<Navigate to=\"/\" />} />\n            </Routes>\n          </div>\n        </Router>\n      </MensagensProvider>\n    </>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}