{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{MensagensProvider}from'./context/MensagensContext';import Home from'./pages/Home/Home';import TelaInicial from'./pages/TelaInicial/TelaInicial';import ConsentimentoPrivacidade from'./components/ConsentimentoPrivacidade/ConsentimentoPrivacidade';import audioService from'./services/AudioService';import'./styles/global.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[consentimentoRealizado,setConsentimentoRealizado]=useState(false);const[carregando,setCarregando]=useState(true);// Verificar se o usuário já deu consentimento e inicializar serviços\nuseEffect(()=>{// Função para inicializar o app\nconst initializeApp=async()=>{try{// Verificar consentimento\nconst privacyConsent=localStorage.getItem('privacyConsent');if(privacyConsent==='true'){setConsentimentoRealizado(true);}// Inicializar serviço de áudio (com tratamento de erros)\nawait Promise.resolve(audioService.init());}catch(error){console.error(\"Erro na inicialização do app:\",error);}finally{// Garantir que o estado de carregamento seja atualizado mesmo em caso de erro\nsetCarregando(false);}};initializeApp();// Limpeza ao desmontar\nreturn()=>{try{audioService.cleanup();}catch(error){console.error(\"Erro ao limpar recursos:\",error);}};},[]);// Dependências vazias para executar apenas uma vez\nconst handleConsent=()=>{setConsentimentoRealizado(true);};if(carregando){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:\"Carregando...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[!consentimentoRealizado&&/*#__PURE__*/_jsx(ConsentimentoPrivacidade,{onConsent:handleConsent}),/*#__PURE__*/_jsx(MensagensProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(TelaInicial,{})}),/*#__PURE__*/_jsx(Route,{path:\"/jogo\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})})})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","MensagensProvider","Home","TelaInicial","ConsentimentoPrivacidade","audioService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","consentimentoRealizado","setConsentimentoRealizado","carregando","setCarregando","initializeApp","privacyConsent","localStorage","getItem","Promise","resolve","init","error","console","cleanup","handleConsent","className","children","onConsent","path","element","to"],"sources":["/Users/alersonrigo/roleta-de-reflexoes/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { MensagensProvider } from './context/MensagensContext';\nimport Home from './pages/Home/Home';\nimport TelaInicial from './pages/TelaInicial/TelaInicial';\nimport ConsentimentoPrivacidade from './components/ConsentimentoPrivacidade/ConsentimentoPrivacidade';\nimport audioService from './services/AudioService';\nimport './styles/global.css';\n\nfunction App() {\n  const [consentimentoRealizado, setConsentimentoRealizado] = useState(false);\n  const [carregando, setCarregando] = useState(true);\n\n  // Verificar se o usuário já deu consentimento e inicializar serviços\n  useEffect(() => {\n    // Função para inicializar o app\n    const initializeApp = async () => {\n      try {\n        // Verificar consentimento\n        const privacyConsent = localStorage.getItem('privacyConsent');\n        if (privacyConsent === 'true') {\n          setConsentimentoRealizado(true);\n        }\n        \n        // Inicializar serviço de áudio (com tratamento de erros)\n        await Promise.resolve(audioService.init());\n      } catch (error) {\n        console.error(\"Erro na inicialização do app:\", error);\n      } finally {\n        // Garantir que o estado de carregamento seja atualizado mesmo em caso de erro\n        setCarregando(false);\n      }\n    };\n\n    initializeApp();\n    \n    // Limpeza ao desmontar\n    return () => {\n      try {\n        audioService.cleanup();\n      } catch (error) {\n        console.error(\"Erro ao limpar recursos:\", error);\n      }\n    };\n  }, []); // Dependências vazias para executar apenas uma vez\n\n  const handleConsent = () => {\n    setConsentimentoRealizado(true);\n  };\n\n  if (carregando) {\n    return <div className=\"loading-container\">Carregando...</div>;\n  }\n\n  return (\n    <>\n      {!consentimentoRealizado && (\n        <ConsentimentoPrivacidade onConsent={handleConsent} />\n      )}\n      \n      <MensagensProvider>\n        <Router>\n          <div className=\"App\">\n            <Routes>\n              <Route path=\"/\" element={<TelaInicial />} />\n              <Route path=\"/jogo\" element={<Home />} />\n              <Route path=\"*\" element={<Navigate to=\"/\" />} />\n            </Routes>\n          </div>\n        </Router>\n      </MensagensProvider>\n    </>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}