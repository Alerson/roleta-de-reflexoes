{"ast":null,"code":"import React,{useState,useEffect}from'react';import audioService from'../../services/AudioService';import'./MusicaControle.css';import{jsx as _jsx}from\"react/jsx-runtime\";const MusicaControle=_ref=>{let{musicaSrc='/musicas/relaxing-background.mp3'}=_ref;const[tocando,setTocando]=useState(false);// Inicializar o servi칞o de 치udio\nuseEffect(()=>{// Verificar estado atual em vez de reinicializar\nif(!audioService.initialized){try{audioService.init(musicaSrc);}catch(error){console.error('Erro ao inicializar 치udio:',error);}}// Sincronizar estado inicial\nsetTocando(audioService.isPlaying());// Escutar mudan칞as de estado do 치udio\nconst handleAudioChange=event=>{if(event.detail&&typeof event.detail.isPlaying==='boolean'){setTocando(event.detail.isPlaying);}};document.addEventListener('audioStateChange',handleAudioChange);return()=>{document.removeEventListener('audioStateChange',handleAudioChange);};},[musicaSrc]);// Alternar entre tocar e pausar a m칰sica\nconst toggleMusica=()=>{try{const novoEstado=audioService.toggle();setTocando(novoEstado);// Disparar evento para outros componentes que possam estar escutando\nconst event=new CustomEvent('audioStateChange',{detail:{isPlaying:novoEstado}});document.dispatchEvent(event);}catch(error){console.error('Erro ao alternar m칰sica:',error);}};return/*#__PURE__*/_jsx(\"button\",{className:`musica-controle ${tocando?'tocando':'pausado'}`,onClick:toggleMusica,\"aria-label\":tocando?'Pausar m칰sica':'Tocar m칰sica',title:tocando?'Pausar m칰sica':'Tocar m칰sica',children:tocando?/*#__PURE__*/_jsx(\"span\",{className:\"musica-icon tocando\",role:\"img\",\"aria-label\":\"M\\xFAsica tocando\",children:\"\\uD83D\\uDD0A\"}):/*#__PURE__*/_jsx(\"span\",{className:\"musica-icon pausado\",role:\"img\",\"aria-label\":\"M\\xFAsica pausada\",children:\"\\uD83D\\uDD07\"})});};export default MusicaControle;","map":{"version":3,"names":["React","useState","useEffect","audioService","jsx","_jsx","MusicaControle","_ref","musicaSrc","tocando","setTocando","initialized","init","error","console","isPlaying","handleAudioChange","event","detail","document","addEventListener","removeEventListener","toggleMusica","novoEstado","toggle","CustomEvent","dispatchEvent","className","onClick","title","children","role"],"sources":["/Users/alersonrigo/roleta-de-reflexoes/src/components/MusicaControle/MusicaControle.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport audioService from '../../services/AudioService';\nimport './MusicaControle.css';\n\nconst MusicaControle = ({ musicaSrc = '/musicas/relaxing-background.mp3' }) => {\n  const [tocando, setTocando] = useState(false);\n\n  // Inicializar o servi칞o de 치udio\n  useEffect(() => {\n    // Verificar estado atual em vez de reinicializar\n    if (!audioService.initialized) {\n      try {\n        audioService.init(musicaSrc);\n      } catch (error) {\n        console.error('Erro ao inicializar 치udio:', error);\n      }\n    }\n    \n    // Sincronizar estado inicial\n    setTocando(audioService.isPlaying());\n    \n    // Escutar mudan칞as de estado do 치udio\n    const handleAudioChange = (event) => {\n      if (event.detail && typeof event.detail.isPlaying === 'boolean') {\n        setTocando(event.detail.isPlaying);\n      }\n    };\n    \n    document.addEventListener('audioStateChange', handleAudioChange);\n    \n    return () => {\n      document.removeEventListener('audioStateChange', handleAudioChange);\n    };\n  }, [musicaSrc]);\n\n  // Alternar entre tocar e pausar a m칰sica\n  const toggleMusica = () => {\n    try {\n      const novoEstado = audioService.toggle();\n      setTocando(novoEstado);\n      \n      // Disparar evento para outros componentes que possam estar escutando\n      const event = new CustomEvent('audioStateChange', { \n        detail: { isPlaying: novoEstado } \n      });\n      document.dispatchEvent(event);\n    } catch (error) {\n      console.error('Erro ao alternar m칰sica:', error);\n    }\n  };\n\n  return (\n    <button \n      className={`musica-controle ${tocando ? 'tocando' : 'pausado'}`}\n      onClick={toggleMusica}\n      aria-label={tocando ? 'Pausar m칰sica' : 'Tocar m칰sica'}\n      title={tocando ? 'Pausar m칰sica' : 'Tocar m칰sica'}\n    >\n      {tocando ? (\n        <span className=\"musica-icon tocando\" role=\"img\" aria-label=\"M칰sica tocando\">\n          游댉\n        </span>\n      ) : (\n        <span className=\"musica-icon pausado\" role=\"img\" aria-label=\"M칰sica pausada\">\n          游댆\n        </span>\n      )}\n    </button>\n  );\n};\n\nexport default MusicaControle;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,YAAY,KAAM,6BAA6B,CACtD,MAAO,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9B,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAwD,IAAvD,CAAEC,SAAS,CAAG,kCAAmC,CAAC,CAAAD,IAAA,CACxE,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,KAAK,CAAC,CAE7C;AACAC,SAAS,CAAC,IAAM,CACd;AACA,GAAI,CAACC,YAAY,CAACQ,WAAW,CAAE,CAC7B,GAAI,CACFR,YAAY,CAACS,IAAI,CAACJ,SAAS,CAAC,CAC9B,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CAEA;AACAH,UAAU,CAACP,YAAY,CAACY,SAAS,CAAC,CAAC,CAAC,CAEpC;AACA,KAAM,CAAAC,iBAAiB,CAAIC,KAAK,EAAK,CACnC,GAAIA,KAAK,CAACC,MAAM,EAAI,MAAO,CAAAD,KAAK,CAACC,MAAM,CAACH,SAAS,GAAK,SAAS,CAAE,CAC/DL,UAAU,CAACO,KAAK,CAACC,MAAM,CAACH,SAAS,CAAC,CACpC,CACF,CAAC,CAEDI,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,CAAEJ,iBAAiB,CAAC,CAEhE,MAAO,IAAM,CACXG,QAAQ,CAACE,mBAAmB,CAAC,kBAAkB,CAAEL,iBAAiB,CAAC,CACrE,CAAC,CACH,CAAC,CAAE,CAACR,SAAS,CAAC,CAAC,CAEf;AACA,KAAM,CAAAc,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAI,CACF,KAAM,CAAAC,UAAU,CAAGpB,YAAY,CAACqB,MAAM,CAAC,CAAC,CACxCd,UAAU,CAACa,UAAU,CAAC,CAEtB;AACA,KAAM,CAAAN,KAAK,CAAG,GAAI,CAAAQ,WAAW,CAAC,kBAAkB,CAAE,CAChDP,MAAM,CAAE,CAAEH,SAAS,CAAEQ,UAAW,CAClC,CAAC,CAAC,CACFJ,QAAQ,CAACO,aAAa,CAACT,KAAK,CAAC,CAC/B,CAAE,MAAOJ,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CAED,mBACER,IAAA,WACEsB,SAAS,CAAE,mBAAmBlB,OAAO,CAAG,SAAS,CAAG,SAAS,EAAG,CAChEmB,OAAO,CAAEN,YAAa,CACtB,aAAYb,OAAO,CAAG,eAAe,CAAG,cAAe,CACvDoB,KAAK,CAAEpB,OAAO,CAAG,eAAe,CAAG,cAAe,CAAAqB,QAAA,CAEjDrB,OAAO,cACNJ,IAAA,SAAMsB,SAAS,CAAC,qBAAqB,CAACI,IAAI,CAAC,KAAK,CAAC,aAAW,mBAAgB,CAAAD,QAAA,CAAC,cAE7E,CAAM,CAAC,cAEPzB,IAAA,SAAMsB,SAAS,CAAC,qBAAqB,CAACI,IAAI,CAAC,KAAK,CAAC,aAAW,mBAAgB,CAAAD,QAAA,CAAC,cAE7E,CAAM,CACP,CACK,CAAC,CAEb,CAAC,CAED,cAAe,CAAAxB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}